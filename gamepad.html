<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Gameboy - Gamepad - How does it work?">
	<meta name="author" content="Chaotic Gabibo">
	<meta name="keywords" content="gameboy, gamepad, joypad, pad">

	<!-- TODO -->
	<!-- Creative Commons – Attribution (CC BY 3.0) Game Boy designed by Dianatomic from the Noun Project -->
	<!-- White background -->
	<!-- <link rel="icon" href="icon/favicon.ico" type="image/x-icon"> -->
	<!-- Transparent background -->
	<!-- <link rel="icon" href="icon/favicon.png" type="image/png"> -->
	<!-- <link rel="icon" href="icon/favicon.svn" type="image/svn"> -->

	<!-- Bootstrap core CSS -->
	<link href="css/bootstrap/bootstrap.min.css" rel="stylesheet">
	<link href="css/bootstrap/bootstrap-theme.min.css" rel="stylesheet">

	<link href="css/gamepad.css" rel="stylesheet">

	<title>Gameboy DMG/CGB Gamepad</title>

</head>
<body role="document">

	<div class="container theme-showcase" role="main">
		<div class="page-header">
			<h1>Gameboy Gamepad</h1>
		</div>
		
		<div class="table-responsive text-center reg-table">
			<table class="table table-bordered table-striped">
				<thead>
					<tr>
						<th>Register P1<br/>0xFF00</th>
						<th>7</th>
						<th>6</th>
						<th>5</th>
						<th>4</th>
						<th>3</th>
						<th>2</th>
						<th>1</th>
						<th>0</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>Port</td>
						<td>Not<br/>used</td>
						<td>Not<br/>used</td>
						<td>P15</td>
						<td>P14</td>
						<td>P13</td>
						<td>P12</td>
						<td>P11</td>
						<td>P10</td>
					</tr>
					<tr>
						<td>
							Value
						</td>
						<td>
							<!-- BIT 7 - NOT USED -->
							<svg id="bit7" xmlns="http://www.w3.org/2000/svg" version="1.1"
							width="50" height="50" viewBox="0 0 100 100">
								<!-- Frame square -->
								<rect x="10" y="10" rx="10" ry="10" width="80" height="80"
								stroke="black" fill="transparent" stroke-width="10"/>
								<!-- Cross -->
								<g stroke="black" stroke-linecap="round" stroke-width="15">
									<line x1="30" y1="30" x2="70" y2="70" />
									<line x1="70" y1="30" x2="30" y2="70" />
								</g>
							</svg>
						</td>
						<td>
							<!-- BIT 6 - NOT USED -->
							<svg id="bit6" xmlns="http://www.w3.org/2000/svg" version="1.1"
							width="50" height="50" viewBox="0 0 100 100">
								<rect x="10" y="10" rx="10" ry="10" width="80" height="80"
								stroke="black" fill="transparent" stroke-width="10"/>

								<g stroke="black" stroke-linecap="round" stroke-width="15">
									<line x1="30" y1="30" x2="70" y2="70" />
									<line x1="70" y1="30" x2="30" y2="70" />
								</g>
							</svg>
						</td>
						<td>
							<!-- BIT 5 - P15 - Read buttons -->
							<input id="P15" value="0" hidden />
							<svg id="bit5" class="" xmlns="http://www.w3.org/2000/svg" version="1.1"
							width="50" height="50" viewBox="0 0 100 100">
								<!-- Frame square -->
								<rect x="10" y="10" rx="10" ry="10" width="80" height="80"
								stroke="black" fill="transparent" stroke-width="10"/>
								<!-- One -->
								<line class="one" x1="50" y1="30" x2="50" y2="70"
								stroke="black" stroke-linecap="round" stroke-width="15" />
								<!-- Zero -->
								<ellipse class="zero" cx="50" cy="50" rx="25" ry="25"
								stroke="black" fill="transparent" stroke-width="15" />
							</svg>
						</td>
						<td>
							<!-- BIT 4 - P14 - Read directions -->
							<input id="P14" value="0" hidden />
							<svg id="bit4" class="" xmlns="http://www.w3.org/2000/svg" version="1.1"
							width="50" height="50" viewBox="0 0 100 100">
								<!-- Frame square -->
								<rect x="10" y="10" rx="10" ry="10" width="80" height="80"
								stroke="black" fill="transparent" stroke-width="10"/>
								<!-- One -->
								<line class="one" x1="50" y1="30" x2="50" y2="70"
								stroke="black" stroke-linecap="round" stroke-width="15" />
								<!-- Zero -->
								<ellipse class="zero" cx="50" cy="50" rx="25" ry="25"
								stroke="black" fill="transparent" stroke-width="15" />
							</svg>
						</td>
						<td>
							<!-- BIT 3 - P13 - Down or Start -->
							<svg id="bit3" xmlns="http://www.w3.org/2000/svg" version="1.1"
							width="50" height="50" viewBox="0 0 100 100">
								<!-- Frame square -->
								<rect x="10" y="10" rx="10" ry="10" width="80" height="80"
								stroke="black" fill="transparent" stroke-width="10"/>
								<!-- One -->
								<line class="one" x1="50" y1="30" x2="50" y2="70"
								stroke="black" stroke-linecap="round" stroke-width="15" />
								<!-- Zero -->
								<ellipse class="zero" cx="50" cy="50" rx="25" ry="25"
								stroke="black" fill="transparent" stroke-width="15" />
							</svg>
						</td>
						<td>
							<!-- BIT 2 - P12 - Up or Select -->
							<svg id="bit2" xmlns="http://www.w3.org/2000/svg" version="1.1"
							width="50" height="50" viewBox="0 0 100 100">
								<!-- Frame square -->
								<rect x="10" y="10" rx="10" ry="10" width="80" height="80"
								stroke="black" fill="transparent" stroke-width="10"/>
								<!-- One -->
								<line class="one" x1="50" y1="30" x2="50" y2="70"
								stroke="black" stroke-linecap="round" stroke-width="15" />
								<!-- Zero -->
								<ellipse class="zero" cx="50" cy="50" rx="25" ry="25"
								stroke="black" fill="transparent" stroke-width="15" />
							</svg>
						</td>
						<td>
							<!-- BIT 1 - P11 - Left or B -->
							<svg id="bit1" xmlns="http://www.w3.org/2000/svg" version="1.1"
							width="50" height="50" viewBox="0 0 100 100">
								<!-- Frame square -->
								<rect x="10" y="10" rx="10" ry="10" width="80" height="80"
								stroke="black" fill="transparent" stroke-width="10"/>
								<!-- One -->
								<line class="one" x1="50" y1="30" x2="50" y2="70"
								stroke="black" stroke-linecap="round" stroke-width="15" />
								<!-- Zero -->
								<ellipse class="zero" cx="50" cy="50" rx="25" ry="25"
								stroke="black" fill="transparent" stroke-width="15" />
							</svg>
						</td>
						<td>
							<!-- BIT 0 - P10 - Right or A -->
							<svg id="bit0" xmlns="http://www.w3.org/2000/svg" version="1.1"
							width="50" height="50" viewBox="0 0 100 100">
								<!-- Frame square -->
								<rect x="10" y="10" rx="10" ry="10" width="80" height="80"
								stroke="black" fill="transparent" stroke-width="10"/>
								<!-- One -->
								<line class="one" x1="50" y1="30" x2="50" y2="70"
								stroke="black" stroke-linecap="round" stroke-width="15" />
								<!-- Zero -->
								<ellipse class="zero" cx="50" cy="50" rx="25" ry="25"
								stroke="black" fill="transparent" stroke-width="15" />
							</svg>
						</td>
					</tr>
				</tbody>
			</table>
		</div>



		<div>
			<table>
				<tbody>
					<tr>
						<td></td>
						<td>
							<svg id="up" class="" xmlns="http://www.w3.org/2000/svg" version="1.1"
							width="50" height="50" viewBox="0 0 100 100">
								<!-- Outer circle -->
								<circle cx="50" cy="50" r="40"
								stroke="black" stroke-width="10" fill="transparent" />
								
								<!-- Arrow -->
								<g transform="rotate(-90 50 50)" stroke="black"
								stroke-width="10" stroke-linecap="round">
									<!-- Arrow head -->
									<polyline points="50 30, 70 50, 50 70"
									 stroke-linejoin="round" fill="none" />
									<!-- Arrow body -->
									<line x1="30" y1="50" x2="65" y2="50" />
								</g>
							</svg>
						</td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
					<tr>
						<td>
							<svg id="left" class="" xmlns="http://www.w3.org/2000/svg" version="1.1"
							width="50" height="50" viewBox="0 0 100 100">
								<!-- Outer circle -->
								<circle cx="50" cy="50" r="40"
								stroke="black" stroke-width="10" fill="transparent" />
								
								<!-- Arrow -->
								<g transform="rotate(180 50 50)" stroke="black"
								stroke-width="10" stroke-linecap="round">
									<!-- Arrow head -->
									<polyline points="50 30, 70 50, 50 70"
									 stroke-linejoin="round" fill="none" />
									<!-- Arrow body -->
									<line x1="30" y1="50" x2="65" y2="50" />
								</g>
							</svg>
						</td>
						<td></td>
						<td>
							<svg id="right" class="" xmlns="http://www.w3.org/2000/svg" version="1.1"
							width="50" height="50" viewBox="0 0 100 100">
								<!-- Outer circle -->
								<circle cx="50" cy="50" r="40"
								stroke="black" stroke-width="10" fill="transparent" />
								
								<!-- Arrow -->
								<g stroke="black"
								stroke-width="10" stroke-linecap="round">
									<!-- Arrow head -->
									<polyline points="50 30, 70 50, 50 70"
									 stroke-linejoin="round" fill="none" />
									<!-- Arrow body -->
									<line x1="30" y1="50" x2="65" y2="50" />
								</g>
							</svg>
						</td>
						<td>
							<svg id="a" class="" xmlns="http://www.w3.org/2000/svg" version="1.1"
							width="50" height="50" viewBox="0 0 100 100">
								<!-- Outer circle -->
								<circle cx="50" cy="50" r="40"
								stroke="black" stroke-width="10" fill="transparent" />
		
								<!-- Button text -->
								<text x="50" y="65" text-anchor="middle" font-weight="bold"
								font-family="Arial Black" font-size="50">A</text>
							</svg>
						</td>
						<td>
							<svg id="b" class="" xmlns="http://www.w3.org/2000/svg" version="1.1"
							width="50" height="50" viewBox="0 0 100 100">
								<!-- Outer circle -->
								<circle cx="50" cy="50" r="40"
								stroke="black" stroke-width="10" fill="transparent" />
		
								<!-- Button text -->
								<text x="50" y="67" text-anchor="middle" font-weight="bold"
								font-family="Arial Black" font-size="50">B</text>
							</svg>
						</td>
					</tr>
					<tr>
						<td></td>
						<td>
							<svg id="down" class="" xmlns="http://www.w3.org/2000/svg" version="1.1"
							width="50" height="50" viewBox="0 0 100 100">
								<!-- Outer round square -->
								<circle cx="50" cy="50" r="40"
								stroke="black" stroke-width="10" fill="transparent" />
								
								<!-- Arrow -->
								<g transform="rotate(90 50 50)" stroke="black"
								stroke-width="10" stroke-linecap="round">
									<!-- Arrow head -->
									<polyline points="50 30, 70 50, 50 70"
									 stroke-linejoin="round" fill="none" />
									<!-- Arrow body -->
									<line x1="30" y1="50" x2="65" y2="50" />
								</g>
							</svg>
						</td>
						<td></td>
						<td>
							<svg id="start" xmlns="http://www.w3.org/2000/svg" version="1.1"
							width="135" height="50" viewBox="0 0 270 100">
								<!-- Outer round square -->
								<rect x="10" y="10" rx="10" ry="10" width="250" height="80"
								stroke="black" fill="transparent" stroke-width="10"/>
								<!-- Button text -->
								<text x="135" y="67" text-anchor="middle" font-weight="bold"
								font-family="Arial Black" font-size="50">START</text>
							</svg>
						</td>
						<td>
							<svg id="select" xmlns="http://www.w3.org/2000/svg" version="1.1"
							width="135" height="50" viewBox="0 0 270 100">
								<!-- Outer round square -->
								<rect x="10" y="10" rx="10" ry="10" width="250" height="80"
								stroke="black" fill="transparent" stroke-width="10"/>
								<!-- Button text -->
								<text x="135" y="67" text-anchor="middle" font-weight="bold"
								font-family="Arial Black" font-size="50">SELECT</text>
							</svg>
						</td>
					</tr>
				</tbody>
			</table>
		</div>

	<div>
		<h2>Controls</h3>
		<ul class="list-group">
		  <li class="list-group-item">
		    <span class="badge">Z</span>A
		  </li>
		  <li class="list-group-item">
		    <span class="badge">X</span>B
		  </li>
		  <li class="list-group-item">
		    <span class="badge">C</span>START
		  </li>
		  <li class="list-group-item">
		    <span class="badge">V</span>SELECT
		  </li>
		  <li class="list-group-item">
		    <span class="badge">↑</span>UP
		  </li>
		  <li class="list-group-item">
		    <span class="badge">↓</span>DOWN
		  </li>
		  <li class="list-group-item">
		    <span class="badge">←</span>LEFT
		  </li>
		  <li class="list-group-item">
		    <span class="badge">→</span>RIGHT
		  </li>
		  
		</ul>
	</div>
	
	<div>
		<h2>References</h3>
	</div>
	
	<div>
		<h2>Github</h3>
	</div>
	

	<div>
		<h2>Copyright</h3>
	</div>


	</div>
	
		<!-- Bootstrap core JavaScript -->
		<!-- Placed at the end of the document so the pages load faster -->
		<script src="js/jquery.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script src="js/docs.min.js"></script>
		<script src="js/model/key.js"></script>
		<script>
		function updateUI() {
			var P1 = KEY.rb();
			updateBit(P1 & 0x1,"#bit0");
			updateBit(P1 & 0x2,"#bit1");
			updateBit(P1 & 0x4,"#bit2");
			updateBit(P1 & 0x8,"#bit3");
			updateBit(P1 & 0x10,"#bit4");
			updateBit(P1 & 0x20,"#bit5");
			updateButton(KEY.isStartPressed,"#start");
			updateButton(KEY.isSelectPressed,"#select");
			updateButton(KEY.isAPressed,"#a");
			updateButton(KEY.isBPressed,"#b");
			updateDirection(KEY.isLeftPressed,"#left");
			updateDirection(KEY.isRightPressed,"#right");
			updateDirection(KEY.isUpPressed,"#up");
			updateDirection(KEY.isDownPressed,"#down");
		}
		
		function updateBit(isOne,bit) {
			if (isOne) {
				$(bit).children('.one').show();
				$(bit).children('.zero').hide();
			} else {
				$(bit).children('.one').hide();
				$(bit).children('.zero').show();
			}
		}
		
		function updateButton(isKeyPressed,button) {
			if (isKeyPressed) {
				$(button).addClass('pressed');
				$(button).children('rect').attr('fill','black');
				$(button).children('circle').attr('fill','black');
				$(button).children('text').attr('fill','white');
			} else {
				$(button).removeClass('pressed');
				$(button).children('rect').attr('fill','transparent');
				$(button).children('circle').attr('fill','transparent');
				$(button).children('text').attr('fill','black');
			}
		}

		function updateDirection(isKeyPressed,direction) {
			if (isKeyPressed) {
				$(direction).addClass('pressed');
				$(direction).children('circle').attr('fill','black');
				$(direction).children('g').attr('stroke','white');
			} else {
				$(direction).removeClass('pressed');
				$(direction).children('circle').attr('fill','transparent');
				$(direction).children('g').attr('stroke','black');
			}
		}

		$('#bit4,#bit5').click(function() {
			$(this).siblings('input').toggleClass('one');
			if ($(this).siblings('input').hasClass('one')) {
				$(this).siblings('input').attr('value','1');
			} else {
				$(this).siblings('input').attr('value','0');
			}
			KEY.wb(parseInt("00" + $("#P15").attr('value') + $("#P14").attr('value') + "0000",2));
			updateUI();
		});
		
		$(document).ready(function() {
			KEY.reset();
			updateUI();
		});
	
		$(document).keydown(function(e) {
			KEY.keydown(e);
			updateUI();
		});
		
		$(document).keyup(function(e) {
			KEY.keyup(e);
			updateUI();
		});
		</script>
	</body>
	</html>